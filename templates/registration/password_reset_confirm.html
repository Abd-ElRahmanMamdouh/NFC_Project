{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block title %}{% trans 'Forgotten password?' %}{% endblock %}
{% block content %}


<div class="container mt-5 pt-5">
    {% if user.is_authenticated %}
    <div class="col-12 mt-5 text-center">
        <p class="lead alert alert-success"><i class="me-2 fa-solid fa-check-double"></i> {% trans 'You are logged in' %}</p>
        <a href="/" class="btn main-btn">{% trans 'Home Page' %}</a>
    </div>
    {% else %}
    <h2 class="text-primary mt-5 text-center alert alert-info" style="font-size:25px;">{% trans 'Password change' %}</h2>
    <div class="card container mt-5">
        <div class="card-body">
            <h3 class="text-white">{% trans 'Set your password' %}</h3>
            <hr>
            {% if validlink %}
            <form method="POST">
                {% csrf_token %}
                {{ form|crispy }}
                <button class="btn main-btn" type="submit">{% trans 'Submit' %}</button>
                <a class="btn main-btn" href="{% url 'users:login' %}">{% trans 'Back' %}</a>
            </form>
            {% else %}
            <form>
                <p class="alert alert-danger"><i class="fas fa-exclamation-circle"></i> 
                    {% trans 'The password reset link was invalid, possibly because it has already been used. Please request a new password reset.' %}
                </p>
                <a class="btn" href="{% url 'users:login' %}">{% trans 'Login' %}</a>
            </form>
        </div>
        {% endif %}
    </div>
    {% endif %}
</div>

{% endblock %}
